pipeline:
  name: yara
  description: Package and distribute the YARA rule-scanning utility with curated rulesets.
  version_file: version.txt
  release_file: release.txt
  builder: native
  native_build_script: build/main.py
  artifacts:
    dest: dist
build:
  syft_version: v1.5.0
dependencies:
  apt:
    - sudo
    - git
    - python3
    - python3-venv
    - python3-pip
    - ca-certificates
    - curl
    - build-essential
    - autoconf
    - automake
    - libtool
    - pkg-config
    - dpkg-dev
    - libssl-dev
    - libpcre2-dev
    - libmagic-dev
    - libjansson-dev
    - libprotobuf-c-dev
    - protobuf-c-compiler
    - rpm
    - gnupg2
  brew:
    - autoconf
    - automake
    - libtool
    - pkg-config
    - openssl@3
    - pcre2
    - libmagic
    - jansson
    - protobuf-c
ci:
  lint:
    - echo "Lint YARA rules"
  tests:
    - name: sample-scan
      command: python ./tests/scan_fixtures.py
